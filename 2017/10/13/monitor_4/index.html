<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>从零开始构建云平台监控(四)图形化展示监控效果 | 我爱西红柿</title>
  <meta name="description" content="组件安装和配置zabbix本功能非常强大，自定义监控项，自动发现、自动注册等，但zabbix-server获取的zabbix数据看起来不是特别直观。
grafana的出现正好弥补了zabbix绘图能力上的不足，grafana是基于js开发的图形编辑器。telegraftelegraf是一个go语言编写的收集监控项的agentTelegraf内存占用小的特点，通过插件来实现不同的监控需求，这里我使用">
<meta property="og:type" content="article">
<meta property="og:title" content="从零开始构建云平台监控(四)图形化展示监控效果">
<meta property="og:url" content="http://yoursite.com/2017/10/13/monitor_4/index.html">
<meta property="og:site_name" content="我爱西红柿">
<meta property="og:description" content="组件安装和配置zabbix本功能非常强大，自定义监控项，自动发现、自动注册等，但zabbix-server获取的zabbix数据看起来不是特别直观。
grafana的出现正好弥补了zabbix绘图能力上的不足，grafana是基于js开发的图形编辑器。telegraftelegraf是一个go语言编写的收集监控项的agentTelegraf内存占用小的特点，通过插件来实现不同的监控需求，这里我使用">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_1.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_2.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_3.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_4.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_5.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_6.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_7.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_8.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_9.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_10.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_11.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_12.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_13.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_14.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_15.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_16.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_17.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_18.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_19.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_20.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_21.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_22.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_23.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_24.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_25.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_26.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_27.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_28.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_29.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_30.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_31.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_32.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_33.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_34.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_35.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_36.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_37.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_38.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_39.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_40.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_41.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_42.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_43.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_44.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_45.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_46.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_47.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_48.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_49.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_50.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_51.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_52.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_53.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_54.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_55.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_56.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_57.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_58.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_59.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_60.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_61.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_62.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_63.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_64.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_65.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_66.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_67.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_126.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_69.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_70.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_71.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_72.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_73.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_74.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_75.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_76.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_77.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_78.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_79.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_80.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_81.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_82.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_83.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_84.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_85.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_86.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_87.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_88.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_89.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_90.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_91.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_92.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_93.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_94.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_95.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_96.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_97.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_98.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_99.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_100.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_101.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_102.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_104.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_103.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_105.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_106.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_107.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_108.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_109.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_110.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_111.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_112.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_113.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_114.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_115.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_116.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_117.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_118.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_119.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_120.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_121.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_122.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_123.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_124.png">
<meta property="og:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_125.png">
<meta property="og:updated_time" content="2017-10-13T15:27:43.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="从零开始构建云平台监控(四)图形化展示监控效果">
<meta name="twitter:description" content="组件安装和配置zabbix本功能非常强大，自定义监控项，自动发现、自动注册等，但zabbix-server获取的zabbix数据看起来不是特别直观。
grafana的出现正好弥补了zabbix绘图能力上的不足，grafana是基于js开发的图形编辑器。telegraftelegraf是一个go语言编写的收集监控项的agentTelegraf内存占用小的特点，通过插件来实现不同的监控需求，这里我使用">
<meta name="twitter:image" content="http://ohx02qrb8.bkt.clouddn.com/monitor_4_1.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://yoursite.com/2017/10/13/monitor_4/index.html">
  
    <link rel="alternate" href="/atom.xml" title="我爱西红柿" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  <!-- font-awesome CSS -->
  <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  
    
    

</head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/wanshaoyuan" target="_blank">
          <img class="img-circle img-rotate" src="/images/image.png" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">我爱西红柿</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">OpenStack engineer &amp;&amp; devops</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="fa fa-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="fa fa-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      <!-- <span class="ins-close ins-selectable"><i class="fa fa-times"></i></span> -->
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav">
        
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="fa fa-fw fa-dashboard"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="fa fa-fw fa-delicious"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="fa fa-fw fa-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="fa fa-fw fa-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="fa fa-fw fa-gg"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="fa fa-fw fa-coffee"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/wanshaoyuan" target="_blank" title="Github" ><i class="fa fa-github"></i></a></li>
        
        <li><a href="http://www.bldewan.com" target="_blank" title="Behance" ><i class="fa fa-behance"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" ><i class="fa fa-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            
            <div class="content">
                <p>已知的已知，已知的未知，未知的未知</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ceph/">ceph</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kubernetes/">kubernetes</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/neutron/">neutron</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/openstack/">openstack</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全/">安全</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ceph/">ceph</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernetes/">kubernetes</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/neutron/">neutron</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openstack/">openstack</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/安全/">安全</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/操作系统/">操作系统</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/Linux/" style="font-size: 13.8px;">Linux</a> <a href="/tags/Python/" style="font-size: 13.2px;">Python</a> <a href="/tags/ceph/" style="font-size: 13.4px;">ceph</a> <a href="/tags/docker/" style="font-size: 14px;">docker</a> <a href="/tags/kubernetes/" style="font-size: 13.2px;">kubernetes</a> <a href="/tags/neutron/" style="font-size: 13.6px;">neutron</a> <a href="/tags/openstack/" style="font-size: 13.8px;">openstack</a> <a href="/tags/安全/" style="font-size: 13px;">安全</a> <a href="/tags/操作系统/" style="font-size: 13px;">操作系统</a> <a href="/tags/数据库/" style="font-size: 13.2px;">数据库</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">6</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/kubernetes/">kubernetes</a>
              </p>
              <p class="item-title">
                <a href="/2018/01/27/kubernetes_base/" class="title">kubernetes����</a>
              </p>
              <p class="item-date">
                <time datetime="2018-01-27T13:45:59.000Z" itemprop="datePublished">2018-01-27</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/docker/">docker</a>
              </p>
              <p class="item-title">
                <a href="/2018/01/25/docker_storage_driver/" class="title">docker storage-driver</a>
              </p>
              <p class="item-date">
                <time datetime="2018-01-25T13:45:59.000Z" itemprop="datePublished">2018-01-25</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/docker/">docker</a>
              </p>
              <p class="item-title">
                <a href="/2018/01/23/docker_default_storage/" class="title">修改docker容器默认空间大小</a>
              </p>
              <p class="item-date">
                <time datetime="2018-01-23T13:45:59.000Z" itemprop="datePublished">2018-01-23</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/kubernetes/">kubernetes</a>
              </p>
              <p class="item-title">
                <a href="/2018/01/02/kubernetes_install/" class="title">kubernetes V1.9安装(附离线安装包和离线镜像）</a>
              </p>
              <p class="item-date">
                <time datetime="2018-01-02T13:45:59.000Z" itemprop="datePublished">2018-01-02</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/docker/">docker</a>
              </p>
              <p class="item-title">
                <a href="/2017/12/15/docker_weave/" class="title">Docker多主机网络(weave)</a>
              </p>
              <p class="item-date">
                <time datetime="2017-12-15T13:45:59.000Z" itemprop="datePublished">2017-12-15</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#组件安装和配置"><span class="toc-number">1.</span> <span class="toc-text">组件安装和配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#monitor-server端操作"><span class="toc-number">2.</span> <span class="toc-text">monitor-server端操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在ceph-mon节点上安装telegraf"><span class="toc-number">3.</span> <span class="toc-text">在ceph-mon节点上安装telegraf</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#openstack物理节点性能监控"><span class="toc-number">4.</span> <span class="toc-text">openstack物理节点性能监控</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#配置template"><span class="toc-number">4.1.</span> <span class="toc-text">配置template</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建row"><span class="toc-number">4.2.</span> <span class="toc-text">创建row</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#定义memory-free-panel"><span class="toc-number">4.3.</span> <span class="toc-text">定义memory free panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#定义根分区剩余空间panel"><span class="toc-number">4.4.</span> <span class="toc-text">定义根分区剩余空间panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#定义cpu空闲率panel"><span class="toc-number">4.5.</span> <span class="toc-text">定义cpu空闲率panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#定义CPU时间片使用情况"><span class="toc-number">4.6.</span> <span class="toc-text">定义CPU时间片使用情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#定义可用内存panel"><span class="toc-number">4.7.</span> <span class="toc-text">定义可用内存panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#定义网桥流量监控panel"><span class="toc-number">4.8.</span> <span class="toc-text">定义网桥流量监控panel</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添服务状态dashboard，"><span class="toc-number">5.</span> <span class="toc-text">添服务状态dashboard，</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OpenStack控制节点服务状态"><span class="toc-number">6.</span> <span class="toc-text">OpenStack控制节点服务状态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#定义nova-api-panel"><span class="toc-number">6.1.</span> <span class="toc-text">定义nova-api panel</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zabbix-altert-dashboard"><span class="toc-number">7.</span> <span class="toc-text">zabbix-altert dashboard</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ceph-dashboard"><span class="toc-number">8.</span> <span class="toc-text">ceph dashboard</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建template"><span class="toc-number">8.1.</span> <span class="toc-text">创建template</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加ceph健康状态监控panel"><span class="toc-number">8.2.</span> <span class="toc-text">添加ceph健康状态监控panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加ceph-mon总数监控panel"><span class="toc-number">8.3.</span> <span class="toc-text">添加ceph mon总数监控panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加ceph-mon-up数panel"><span class="toc-number">8.4.</span> <span class="toc-text">添加ceph mon up数panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加ceph-osd总数监控panel"><span class="toc-number">8.5.</span> <span class="toc-text">添加ceph osd总数监控panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加ceph-osd-up数监控panel"><span class="toc-number">8.6.</span> <span class="toc-text">添加ceph osd up数监控panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加ceph总容量panel"><span class="toc-number">8.7.</span> <span class="toc-text">添加ceph总容量panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加ceph剩余容量panel"><span class="toc-number">8.8.</span> <span class="toc-text">添加ceph剩余容量panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加ceph已用容量panel"><span class="toc-number">8.9.</span> <span class="toc-text">添加ceph已用容量panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加ceph容量使用率-饼图-panel"><span class="toc-number">8.10.</span> <span class="toc-text">添加ceph容量使用率(饼图)panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加pool容量使用率-已compute-pool为例-panel"><span class="toc-number">8.11.</span> <span class="toc-text">添加pool容量使用率(已compute pool为例)panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加pool池的使用趋势图-以compute-pool为例-panel"><span class="toc-number">8.12.</span> <span class="toc-text">添加pool池的使用趋势图(以compute pool为例)panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加性能panel"><span class="toc-number">8.13.</span> <span class="toc-text">添加性能panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加ceph-pg-read-rate-panel"><span class="toc-number">8.14.</span> <span class="toc-text">添加ceph pg read rate panel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加ceph-pg-write-rate-panel"><span class="toc-number">8.15.</span> <span class="toc-text">添加ceph pg write rate panel</span></a></li></ol></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-monitor_4" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      从零开始构建云平台监控(四)图形化展示监控效果
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="fa fa-calendar-check-o"></i>
	<a href="/2017/10/13/monitor_4/" class="article-date">
	  <time datetime="2017-10-13T15:27:44.000Z" itemprop="datePublished">2017-10-13</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </span>

        
  <span class="article-tag">
    <i class="fa fa-tag"></i>
	<a class="article-tag-link" href="/tags/Linux/">Linux</a>
  </span>


        

        <span class="post-comment"><i class="fa fa-commenting-o"></i> <a href="/2017/10/13/monitor_4/#comments" class="article-comment-link">评论</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 3,011(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 12(分)</span>
	

      </div>
      
      <div class="toggle-toc hidden-xs" data-stick-top>
        <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
          <i class="text-collapsed fa fa-anchor"></i>
          <i class="text-in fa fa-close"></i>
        </a>
      </div>
      
    </div>
    <div class="article-entry markdown-body" itemprop="articleBody">
      
        <h3 id="组件安装和配置"><a href="#组件安装和配置" class="headerlink" title="组件安装和配置"></a>组件安装和配置</h3><p>zabbix本功能非常强大，自定义监控项，自动发现、自动注册等，但zabbix-server获取的zabbix数据看起来不是特别直观。</p>
<p>grafana的出现正好弥补了zabbix绘图能力上的不足，grafana是基于js开发的图形编辑器。<br>telegraf<br>telegraf是一个go语言编写的收集监控项的agentTelegraf内存占用小的特点，通过插件来实现不同的监控需求，这里我使用ceph插件。</p>
<p>influxdb<br>InfluxDB 是一个开源分布式时序|、事件和指标数据库。使用 Go 语言编写，无需外部依赖。其设计目标是实现分布式和水平伸缩扩展。<br>它有三大特性：  </p>
<ol>
<li>Time Series （时间序列）：你可以使用与时间有关的相关函数（如最大，最小，求和等）  </li>
<li>Metrics（度量）：你可以实时对大量数据进行计算  </li>
<li>Eevents（事件）：它支持任意的事件数据<br>特点<br>schemaless(无结构)，可以是任意数量的列<br>Scalable<br>min, max, sum, count, mean, median 一系列函数，方便统计<br>Native HTTP API, 内置http支持，使用http读写<br>Powerful Query Language 类似sql<br>Built-in Explorer 自带管理工具  </li>
</ol>
<p>通过grafana调用zabbix的接口的实现，通过自定义模板和key去拉去数据，在grafana上进行展示，grafana只做统一的监控展示平台ceph的一些监控数据由telegraf收集存到influxdb，grafana去读取。</p>
<p>为什么选择telegraf而不直接通过zabbix写item获取这些数据？<br>1，telegraf是一个go语言写的小程序，占用资源非常小，并且本身有监控ceph的插件<br>2，telegraf监控ceph的插件，监控的数据非常全，osd数mon数，细致点，journal盘的速率、pgmap的数率，cluster的iops、pool池的使用趋势等等，如果用zabbix的话我们想获取这些数据要写非常多的item。  </p>
<h3 id="monitor-server端操作"><a href="#monitor-server端操作" class="headerlink" title="monitor-server端操作"></a>monitor-server端操作</h3><p>安装influxdb<br>influxdb的安装<br>配置yum源<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">cat &lt;&lt;EOF | sudo tee /etc/yum.repos.d/influxdb.repo</div><div class="line">[influxdb]</div><div class="line">name = InfluxDB Repository - RHEL \$releasever</div><div class="line">baseurl = https://repos.influxdata.com/rhel/\$releasever/\$basearch/stable</div><div class="line">enabled = 1</div><div class="line">gpgcheck = 1</div><div class="line">gpgkey = https://repos.influxdata.com/influxdb.key</div><div class="line">EOF</div></pre></td></tr></table></figure></p>
<p>yum install influxdb<br>systemctl enable influxdb<br>systemctl restart influxdb  </p>
<p>默认influxdb的web管理界面是关闭的开启方法<br> vim /etc/influxdb/influxdb.conf<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[admin]</div><div class="line">    enabled = true</div><div class="line">    bind-address = &quot;:8083&quot;</div></pre></td></tr></table></figure></p>
<p>重启influxdb<br>浏览器服务<a href="http://ip:8083" target="_blank" rel="external">http://ip:8083</a></p>
<h3 id="在ceph-mon节点上安装telegraf"><a href="#在ceph-mon节点上安装telegraf" class="headerlink" title="在ceph-mon节点上安装telegraf"></a>在ceph-mon节点上安装telegraf</h3><p>telegraf通过读取ceph的asok文件获取里面的信息来达到监控目的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://dl.influxdata.com/telegraf/releases/telegraf-1.2.1.x86_64.rpm</div></pre></td></tr></table></figure></p>
<p>yum localinstall telegraf-1.2.1.x86_64.rpm</p>
<p>修改telegraf的启动用户，不然会读取ceph asok文件权限不足<br>vim /lib/systemd/system/telegraf.service<br>将User=telegraf改为User=root<br>systemctl daemon-reload<br>systemctl restart telegraf<br>systemctl enable telegraf  </p>
<p>配置telegraf<br>vim /etc/telegraf/telegraf.conf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[log]</div><div class="line">logfile = &quot;/var/log/telegraf/telegraf.log&quot;</div><div class="line">[[outputs.influxdb]]</div><div class="line">urls = [&quot;http://10.10.1.100:8086&quot;] # required #填写对应的influxdb的地址</div><div class="line">[[inputs.ceph]]</div><div class="line">interval = &apos;1m&apos;</div><div class="line">ceph_binary = &quot;/usr/bin/ceph&quot;</div><div class="line">socket_dir = &quot;/var/run/ceph&quot;</div><div class="line">mon_prefix = &quot;ceph-mon&quot;</div><div class="line">osd_prefix = &quot;ceph-osd&quot;</div><div class="line">ceph_user = &quot;client.admin&quot;</div><div class="line">ceph_config = &quot;/etc/ceph/ceph.conf&quot;</div><div class="line">gather_admin_socket_stats = true</div><div class="line">gather_cluster_stats = true</div></pre></td></tr></table></figure></p>
<p>另外3个控制节点同步配置<br>重启telegraf<br>测试数据是否拿到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">telegraf -test -config /etc/telegraf/telegraf.conf -config-directory /etc/telegraf/telegraf.d -input-filter ceph</div></pre></td></tr></table></figure></p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_1.png" alt=""><br>在monitor-server的influxdb上可以看见创建好的库<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_2.png" alt=""></p>
<p>进入influxdb<br>influxd<br>列出全部库<br>show databases;<br>进入指定的库<br>use telegraf<br>列出库中全部表<br>show measurements;<br>查询表<br>select * from ceph;  </p>
<p>默认influxdb的数据存储时间为168小时也就是7天如果要修改方法为<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_3.png" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">create retention policy &quot;rp_name&quot; on &quot;db_name&quot; duration 3w replication 1 default</div><div class="line">rp_name：策略名</div><div class="line">db_name：具体的数据库名</div><div class="line">3w：保存3周，3周之前的数据将被删除，influxdb具有各种事件参数，比如：h（小时），d（天），w（星期）</div><div class="line">replication 1：副本个数，一般为1就可以了</div><div class="line">default：设置为默认策略</div></pre></td></tr></table></figure></p>
<p>对已有的策略修改<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter retention policy &quot;rp_name&quot; on &quot;db_name&quot; duration 30d default</div></pre></td></tr></table></figure></p>
<p>删除已有策略<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">drop retention policy &quot;rp_name&quot;</div></pre></td></tr></table></figure></p>
<p>安装grafana<br>配置安装grafana<br>下载软件包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://s3-us-west-2.amazonaws.com/grafana-releases/release/grafana-4.1.2-1486989747.x86_64.rpm</div></pre></td></tr></table></figure></p>
<p>安装软件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum localinstall /root/grafana-4.1.2-1486989747.x86_64.rpm</div></pre></td></tr></table></figure></p>
<p>启动grafana<br>systemctl start grafana-server<br>查看端口<br>lsof -i:3000  </p>
<p>安装pie chart插件</p>
<p>ceph这一块用饼图描述比较直观点，需要安装grafana Pie Chart插件  </p>
<p>grafana-cli plugins install grafana-piechart-panel  </p>
<p>在线安装方式<br>grafana-cli plugins install grafana-piechart-panel   </p>
<p>离线安装方式<br>将下载好的plugins解压到<br>/var/lib/grafana/plugins<br>grafana-cli plugins install grafana-piechart-pane  </p>
<p>重启grafana<br>systemctl restart grafana-server<br>登录grafana<br><a href="http://localhost:3000" target="_blank" rel="external">http://localhost:3000</a><br>默认帐号密码为admin/admin<br>将插件激活<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_4.png" alt=""></p>
<p>enable zabbix<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_5.png" alt=""></p>
<p>右侧可以看见已经安装的插件<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_6.png" alt=""></p>
<p>添加Datasource<br>选zabbix<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_7.png" alt=""></p>
<p>url输入<br><a href="http://192.168.122.100/zabbix/api_jsonrpc.php" target="_blank" rel="external">http://192.168.122.100/zabbix/api_jsonrpc.php</a>  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_8.png" alt=""></p>
<p>测试api连接<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_9.png" alt=""></p>
<p>然后就可以在dashboard里面看见两个新模板了<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_10.png" alt=""></p>
<p>将Template Linux Server删除<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_11.png" alt=""></p>
<p>查看zabbix-server模板  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_12.png" alt=""></p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_13.png" alt=""></p>
<p>添加influxdb DataSource<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_14.png" alt=""></p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_15.png" alt=""></p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_16.png" alt=""></p>
<p>创建以下dashboard<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_17.png" alt=""></p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_18.png" alt=""></p>
<p>创建好后，我们从一个个dashboard里面添加模块</p>
<h3 id="openstack物理节点性能监控"><a href="#openstack物理节点性能监控" class="headerlink" title="openstack物理节点性能监控"></a>openstack物理节点性能监控</h3><h4 id="配置template"><a href="#配置template" class="headerlink" title="配置template"></a>配置template</h4><p>因为这是一个集群，有很多台机器，每台机器所对应的角色是不一样的，比如node-1到node-3是控制节点node-4到node6是存储节点 node-7到node-10是计算节点，不同角色的监控项也有略微不同。但我们想在一个dashboard展示多台机器的监控值<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_19.png" alt=""></p>
<p>所以我们需要定义Templating<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_20.png" alt=""></p>
<p>定义group的templating<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_21.png" alt=""></p>
<p>然后在zabbix里面定义的group就出来了<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_22.png" alt=""></p>
<p>selection options host可以选多个，然后在一个图上绘出，我建议，这里还是一一对应的显示吧<br>定义host的templating<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_23.png" alt=""></p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_24.png" alt=""></p>
<p>匹配完的显示<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_25.png" alt=""></p>
<h4 id="创建row"><a href="#创建row" class="headerlink" title="创建row"></a>创建row</h4><p>row是一组panel的集合  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_26.png" alt=""><br>这里面的uptime、memeory free、free disk space on / 、system load(1min）这些panel就是属于主机情况这个row的。<br>以创建主机情况row为例<br>dashboard下面有一个add row的按钮<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_27.png" alt=""></p>
<p>编辑row<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_28.png" alt=""></p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_29.png" alt=""></p>
<p>编辑名称显示名字<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_30.png" alt=""></p>
<p>按照上述方法创建另外3个row，资源使用情况，网卡信息，<br>然后ctrl+s保存这个dashboard的改变。<br>创建panel<br>将panel创建到对应的row中<br>创建uptime时间panel<br>点击创建panel  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_31.png" alt=""><br>类型为Singlestat panel<br>general配置 标题大小<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_32.png" alt="">   </p>
<p>metrics配置数据来源  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_33.png" alt="">   </p>
<p>配置字体颜色<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_34.png" alt="">   </p>
<p>ctrl+s保存，uptime 的panel就完成了。  </p>
<h4 id="定义memory-free-panel"><a href="#定义memory-free-panel" class="headerlink" title="定义memory free panel"></a>定义memory free panel</h4><p>在主机情况row创建Singlestat类型的panel<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_35.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_36.png" alt="">   </p>
<p>options定义背景色，和定义值范围，根据值的不同范围，背景色会自动调整</p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_37.png" alt="">   </p>
<p>这里需要注意下Thresholds这个参数，这个参数定义值的范围，然后granafa会根据这个范围自动调整颜色，如7,9如果值小于7则显示红色，在7~9之间则显示橙色，大于9则显示绿色，但这个值不支持单位换算后的值，所以这也是为什么我这里是10737418240,21474836480，是10,20 G内存空闲小于10G变红色，10G~20G之间橙色，大于20G绿色。</p>
<p>ctrl+s保存  </p>
<h4 id="定义根分区剩余空间panel"><a href="#定义根分区剩余空间panel" class="headerlink" title="定义根分区剩余空间panel"></a>定义根分区剩余空间panel</h4><p>在主机情况row创建Singlestat类型的panel<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_38.png" alt="">   </p>
<p>配置metrics<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_39.png" alt="">   </p>
<p>options定义背景色，和定义值范围，根据值的不同范围，背景色会自动调整<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_40.png" alt="">   </p>
<p>这里也是定义小于10G时背景色变红，10G~20G范围内为橙色，大于20G为绿色。<br>ctrl+s保存<br>定义cpu负载panel<br>不过这里首先需要修改我们zabbix的 item，zabbix item里面定义的 per cpu而不是all cpu，所以得出来的值会比操作系统里面直接uptime看起来小 ，需要修改zabbix 里面Template OpenStack Compute、和Template OpenStack Controller里面，找到这三个健值修改成all<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_41.png" alt="">   </p>
<p>测试<br>zabbix_agentd -t “system.cpu.load[all,avg1]”  </p>
<p>在主机情况row创建Singlestat类型的panel<br>这里我选择15分钟负载情况  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_42.png" alt=""><br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_43.png" alt=""><br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_44.png" alt="">   </p>
<p>ctrl+s保存  </p>
<h4 id="定义cpu空闲率panel"><a href="#定义cpu空闲率panel" class="headerlink" title="定义cpu空闲率panel"></a>定义cpu空闲率panel</h4><p>在资源使用情况row创建Graph类型的panel<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_45.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_46.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_47.png" alt="">   </p>
<p>单位为percent</p>
<p>保存<br>ctrl+s  </p>
<h4 id="定义CPU时间片使用情况"><a href="#定义CPU时间片使用情况" class="headerlink" title="定义CPU时间片使用情况"></a>定义CPU时间片使用情况</h4><p>在资源使用情况rom创建Table panel<br>Genterl配置panel 名字<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_48.png" alt="">   </p>
<p>配置Metrics<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_49.png" alt="">   </p>
<p>配置Options<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_50.png" alt="">   </p>
<p>ctrl+s保存</p>
<h4 id="定义可用内存panel"><a href="#定义可用内存panel" class="headerlink" title="定义可用内存panel"></a>定义可用内存panel</h4><p>在资源使用情况rom创建Graph panel<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_51.png" alt=""><br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_52.png" alt=""><br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_53.png" alt="">   </p>
<h4 id="定义网桥流量监控panel"><a href="#定义网桥流量监控panel" class="headerlink" title="定义网桥流量监控panel"></a>定义网桥流量监控panel</h4><p>这里需要注意，我们直接对ovs桥进行监控，因为通过ovs桥我们可以确认这部分流量的用途，直接通过物理网卡的话不直观，所以这里需要在zabbix里面将对应的item加上。  </p>
<p>这里将Incoming和Outcoming拆分了开来用两张图显示，并且只监控traffic流量。<br>在网卡信息row创建Graph panel<br>先配置Incoming_Network_traffic</p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_54.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_55.png" alt="">   </p>
<p><code>注意item为&quot;/Incoming network traffic on br-.*/&quot;</code><br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_56.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_57.png" alt="">   </p>
<p>在配置Outcoming_Network_traffic<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_58.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_59.png" alt="">   </p>
<p>item写这个   </p>
<p><code>/Outgoing network traffic on br-.*/</code><br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_60.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_61.png" alt="">   </p>
<p>ctrl+s  </p>
<p>最终效果<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_62.png" alt="">   </p>
<h3 id="添服务状态dashboard，"><a href="#添服务状态dashboard，" class="headerlink" title="添服务状态dashboard，"></a>添服务状态dashboard，</h3><p>这里我拆分为3个dashboard，分别是OpenStack控制节点服务状态、OpenStack计算节点服务状态、OpenStack储存节点服务状态  </p>
<p>每个dashboard设置不同的Templating以OpenStack控制节点服务状态为例，后面都一样<br>创建group，指定为controller这样就不会选别的了，计算节点就指定为computer、储存节点就指定为ceph  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_63.png" alt="">   </p>
<p>创建host<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_64.png" alt="">   </p>
<p>ctrl+s保存  </p>
<h3 id="OpenStack控制节点服务状态"><a href="#OpenStack控制节点服务状态" class="headerlink" title="OpenStack控制节点服务状态"></a>OpenStack控制节点服务状态</h3><h4 id="定义nova-api-panel"><a href="#定义nova-api-panel" class="headerlink" title="定义nova-api panel"></a>定义nova-api panel</h4><p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_65.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_66.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_67.png" alt=""><br>配置 value mapping，因为默认抓取的值为数字我们需要将数字映射为更好看的值，比如大于1映射为running，其他映射为down，这里测试发现down后值经常为0.0x所以这里设置映射为值的范围，比如0~0.9为down，1为up  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_126.png" alt=""></p>
<p>效果如下<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_69.png" alt=""><br>我把nova-api关掉  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_70.png" alt="">   </p>
<p>其他控制节点和计算节点监控项目可以直接duplicate了，只需要修改下panel和metrics<br>控制节点需要显示的panel<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">nova-api</div><div class="line">nova-scheduler</div><div class="line">nova-conductor</div><div class="line">Neutron-server</div><div class="line">Neutron-l3-agent</div><div class="line">Neutron-ovs-agent</div><div class="line">Neutron-metadata</div><div class="line">Neutron-DHCP</div><div class="line">Glance-api</div><div class="line">Glance-Registry</div><div class="line">Keystone</div><div class="line">Rabbitmq_cluster</div><div class="line">Rabbitmq_liste_port</div><div class="line">Rabbitmq_BEAM_process</div><div class="line">Rabbitmq_EPMD_listen_port</div><div class="line">Rabbitmq_EPMD_process</div><div class="line">Mysql_cluster</div><div class="line">Cinder_api</div><div class="line">Cinder_scheduler</div><div class="line">Cinder_volumer</div><div class="line">Ceilometer_process</div><div class="line">Ceilometer_API</div></pre></td></tr></table></figure></p>
<p>计算节点需要显示的panel<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">openstack-compute</div><div class="line">libvirtd</div><div class="line">openvswitch-agent</div><div class="line">ceilometer-agent-compute</div></pre></td></tr></table></figure></p>
<h3 id="zabbix-altert-dashboard"><a href="#zabbix-altert-dashboard" class="headerlink" title="zabbix-altert dashboard"></a>zabbix-altert dashboard</h3><p>alter-dashboard主要显示整个集群的问题  </p>
<p>创件panel，类型为zabbix-Triggers<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_71.png" alt="">   </p>
<p>添加后，它自动会将zabbix的Triggers同步过来<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_72.png" alt="">   </p>
<h3 id="ceph-dashboard"><a href="#ceph-dashboard" class="headerlink" title="ceph dashboard"></a>ceph dashboard</h3><h4 id="创建template"><a href="#创建template" class="headerlink" title="创建template"></a>创建template</h4><p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_73.png" alt="">   </p>
<p>这里需要注意把group中固定住控制节点  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_74.png" alt="">   </p>
<p>host配置<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_75.png" alt="">   </p>
<h4 id="添加ceph健康状态监控panel"><a href="#添加ceph健康状态监控panel" class="headerlink" title="添加ceph健康状态监控panel"></a>添加ceph健康状态监控panel</h4><p>在状态row中创建 Singlestat  panel  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_76.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_77.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_78.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_79.png" alt="">   </p>
<h4 id="添加ceph-mon总数监控panel"><a href="#添加ceph-mon总数监控panel" class="headerlink" title="添加ceph mon总数监控panel"></a>添加ceph mon总数监控panel</h4><p>在状态row中创建一个singlestat的panel，General修改名字，metrics配置数据源<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_80.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_81.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_82.png" alt="">   </p>
<h4 id="添加ceph-mon-up数panel"><a href="#添加ceph-mon-up数panel" class="headerlink" title="添加ceph mon up数panel"></a>添加ceph mon up数panel</h4><p>在状态row中创建一个singlestat的panel，General修改名字，metrics配置数据源<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_83.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_84.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_85.png" alt="">   </p>
<p>thresholds要根据实际集群mon数写，ceph-mon不能挂掉总个数的一半，3个mon只能挂1个，所以这里写2,3小于2时就变红。</p>
<h4 id="添加ceph-osd总数监控panel"><a href="#添加ceph-osd总数监控panel" class="headerlink" title="添加ceph osd总数监控panel"></a>添加ceph osd总数监控panel</h4><p>在状态row中创建一个singlestat的panel，General修改名字，metrics配置数据源  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_86.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_87.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_88.png" alt="">   </p>
<h4 id="添加ceph-osd-up数监控panel"><a href="#添加ceph-osd-up数监控panel" class="headerlink" title="添加ceph osd up数监控panel"></a>添加ceph osd up数监控panel</h4><p>在状态row中创建一个singlestat的panel，General修改名字，metrics配置数据源</p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_89.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_90.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_91.png" alt="">   </p>
<h4 id="添加ceph总容量panel"><a href="#添加ceph总容量panel" class="headerlink" title="添加ceph总容量panel"></a>添加ceph总容量panel</h4><p>在容量row中创建一个singlestat的panel，General修改名字，metrics配置数据源<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_92.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_93.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_94.png" alt="">   </p>
<p>注意单位</p>
<h4 id="添加ceph剩余容量panel"><a href="#添加ceph剩余容量panel" class="headerlink" title="添加ceph剩余容量panel"></a>添加ceph剩余容量panel</h4><p>在容量row中创建一个singlestat的panel，General修改名字，metrics配置数据源<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_95.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_96.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_97.png" alt="">   </p>
<h4 id="添加ceph已用容量panel"><a href="#添加ceph已用容量panel" class="headerlink" title="添加ceph已用容量panel"></a>添加ceph已用容量panel</h4><p>在容量row中创建一个singlestat的panel，General修改名字，metrics配置数据源</p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_98.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_99.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_100.png" alt="">   </p>
<p>注意单位</p>
<h4 id="添加ceph容量使用率-饼图-panel"><a href="#添加ceph容量使用率-饼图-panel" class="headerlink" title="添加ceph容量使用率(饼图)panel"></a>添加ceph容量使用率(饼图)panel</h4><p>在容量row中创建一个 Pie Chart 的panel，General修改名字，metrics配置数据源<br>已经使用和剩余可用百分比<br>利用饼图展示已用空间占总空间的比例<br>新建个panel，类型选择pie chart<br>general设置名字  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_101.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_102.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_104.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_103.png" alt="">   </p>
<h4 id="添加pool容量使用率-已compute-pool为例-panel"><a href="#添加pool容量使用率-已compute-pool为例-panel" class="headerlink" title="添加pool容量使用率(已compute pool为例)panel"></a>添加pool容量使用率(已compute pool为例)panel</h4><p>在容量row中创建一个 Pie Chart 的panel，General修改名字，metrics配置数据源  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_105.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_106.png" alt="">   </p>
<p>option这里根刚才一样<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_107.png" alt="">   </p>
<p>另外几个pool根这个一样，需要注意的是 where name里面的pool name要更改。</p>
<h4 id="添加pool池的使用趋势图-以compute-pool为例-panel"><a href="#添加pool池的使用趋势图-以compute-pool为例-panel" class="headerlink" title="添加pool池的使用趋势图(以compute pool为例)panel"></a>添加pool池的使用趋势图(以compute pool为例)panel</h4><p>在pool池中的使用情况row中创建Graph panel</p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_108.png" alt="">  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_109.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_110.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_111.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_112.png" alt="">   </p>
<p>显示30天的数据<br>剩下pool的使用情况图根上面有一，只需要修改metrics里面的pool名就可以了  </p>
<h4 id="添加性能panel"><a href="#添加性能panel" class="headerlink" title="添加性能panel"></a>添加性能panel</h4><p>在性能row中创将graph panel  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_113.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_114.png" alt="">   </p>
<p>注意这里的datasource是 zabbix  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_115.png" alt="">   </p>
<p>单位选择IOPS</p>
<h4 id="添加ceph-pg-read-rate-panel"><a href="#添加ceph-pg-read-rate-panel" class="headerlink" title="添加ceph pg read rate panel"></a>添加ceph pg read rate panel</h4><p>在性能row中创将graph panel<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_116.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_117.png" alt="">   </p>
<p>单位为bites<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_118.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_119.png" alt="">   </p>
<p>显示一天的</p>
<h4 id="添加ceph-pg-write-rate-panel"><a href="#添加ceph-pg-write-rate-panel" class="headerlink" title="添加ceph pg write rate panel"></a>添加ceph pg write rate panel</h4><p>在性能row中创将graph panel<br><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_120.png" alt="">   </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_121.png" alt=""></p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_122.png" alt=""></p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_123.png" alt="">   </p>
<p>最终效果  </p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_124.png" alt=""></p>
<p><img src="http://ohx02qrb8.bkt.clouddn.com/monitor_4_125.png" alt="">   </p>

      
    </div>
    <div class="article-footer">
      
    </div>
  </article>
  
    
  <section id="comments">
  	
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2017/10/16/monitor_5/" title="从零开始搭建云平台监控(五)监控自动化部署"><i class="fa fa-angle-left" aria-hidden="true"></i>&nbsp;&nbsp;上一篇</a>
    </li>
    
    
    <li class="next">
      <a href="/2017/10/11/monitor_3/" title="从零开始构建云平台监控(三)配置基础监控平台">下一篇&nbsp;&nbsp;<i class="fa fa-angle-right" aria-hidden="true"></i></a>
    </li>
    
  </ul>
  
  
  
  <div class="bar-right">
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
  </div>
  
  </div>
</nav>
  


</main>

  
  <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script src="/js/plugin.js"></script>
<script src="/js/application.js"></script>
  
    
    
    
        <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>
    
    
    
        


    
    
        
    
    



</body>
</html>